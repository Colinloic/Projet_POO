{% extends 'base.html.twig' %}

{% block title %}{{ pokemon.name|capitalize }}{% endblock %}
{% set titleSection = pokemon.name|capitalize %}

{% block body %}
	{% include('includes/title.twig') %}

	<div class="flex relative z-10 mt-10 pokemonCols">
		<div class="w-60p min-h-[50rem] mr-8 pl-8 relative break-word">
			<div class="mb-5">
				<h2 class="text-secondary text-2xl mb-1">À propos</h2>
				<p>{{ pokemon.description }}</p>
			</div>
			<div class="mb-5">
				<h3 class="text-secondary text-2xl mb-1">Physionomie et attitude</h3>
				<p>{{ pokemon.attitude }}</p>
			</div>
			<div class="mb-5">
				<h4 class="text-secondary text-2xl mb-1">Différences</h4>
				<p>{{ pokemon.differences }}</p>
			</div>
			<div class="mb-5">
				<h5 class="text-secondary text-2xl mb-1">Évolutions</h5>
				{% if pokemon.evolution %}
					<p>{{ pokemon.evolution }}</p>
				{% else %}
					<p>Il n'y a pas d'évolution sur ce pokemon</p>
				{% endif %}
			</div>
			<div>
				<h6 class="text-secondary text-2xl mb-1">Talents</h6>
				{{ pokemon.talent }}
			</div>
		</div>
		<div class="flex flex-col shadow-lg rounded-2xl min-w-[400px] sticky top-9 z-10 self-start overflow-y-auto">
			<div data-bs-toggle="modal" data-bs-target="#infoPokemon" data-bg="bg-{{ pokemon.category.url }}" class="flex items-center justify-center hover:cursor-pointer group relative bg-{{ pokemon.category.url }} group py-8 px-8 w-full overflow-hidden min-h-[250px]" id="pokemonCard">
				<img src="{{ asset('static/uploads/pokemons/'~ pokemon.imageUrl) }}" class="group-hover:scale-125 transition-transform duration-500" alt="pokemon" height="250" width="250">
				<div class="absolute right-4 top-4 text-white">
					<svg focusable="false" aria-hidden="true" fill="currentColor" height="35" width="35" viewBox="0 0 24 24" data-testid="InfoRoundedIcon" aria-label="fontSize large">
						<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z"></path>
					</svg>
				</div>
				<div class="flex flex-col p-4 absolute h-full w-full top-0 left-0 bg-black text-white bg-opacity-50 opacity-0 group-hover:bg-opacity-50 group-hover:opacity-100 transition-opacity duration-500">
					<div class="bg-black bg-opacity-50 rounded-2xl h-full py-3 px-4 leading-10 transition-opacity duration-500">
						<p class="flex">
							<span class="w-1/2">Type : </span>
							<span class="flex items-center font-medium w-1/2 pl-2 overflow-hidden text-ellipsis">
								<img src="{{ asset('static/uploads/categories/' ~pokemon.category.getLogoUrl()) }}" class="relative z-10" alt="logo" width="40" height="40">
								<span class="badge bg-{{ pokemon.category.url }}">{{ pokemon.category.name }}</span>
							</span>
						</p>
						<p class="flex">
							<span class="w-1/2">Taille : </span>
							<span class="font-medium w-1/2 overflow-hidden text-ellipsis">{{ pokemon.size }}</span>
						</p>
						<p class="flex">
							<span class="w-1/2">Poids : </span>
							<span class="font-medium w-1/2 overflow-hidden text-ellipsis">{{ pokemon.weight }}</span>
						</p>
						<p class="flex">
							<span class="w-1/2">Taux de capture : </span>
							<span class="font-medium w-1/2 overflow-hidden text-ellipsis">{{ pokemon.catchRate }}</span>
						</p>
						<p class="flex">
							<span class="w-1/2">Couleur : </span>
							<span class="font-medium w-1/2 overflow-hidden text-ellipsis">{{ pokemon.color }}</span>
						</p>
					</div>
				</div>
			</div>
			<div class="bg-white py-4 px-4 w-full">
				<div class="flex items-center justify-between text-secondary font-medium">
					<div class="flex items-center">
						<svg focusable="false" aria-hidden="true" fill="currentColor" height="35" width="35" viewBox="0 0 24 24" data-testid="AccountCircleIcon" aria-label="fontSize large">
							<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"></path>
						</svg>
						<span class="ml-2">{{ pokemon.author|capitalize }}</span>
					</div>
					{% if app.user and pokemon.user.id == app.user.id %}
						<div class="flex">
							<a href="{{ path('pokemon_update', { 'name': pokemon.name|lower }) }}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Modifier" class="flex bg-secondary hover:bg-primary hover:text-secondary py-2 px-2 mr-3 rounded-full text-white transition-colors">
								<svg focusable="false" fill="currentColor" aria-hidden="true" height="20" width="20" viewBox="0 0 24 24" data-testid="CreateRoundedIcon" aria-label="fontSize large">
									<path d="M3 17.46v3.04c0 .28.22.5.5.5h3.04c.13 0 .26-.05.35-.15L17.81 9.94l-3.75-3.75L3.15 17.1c-.1.1-.15.22-.15.36zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path>
								</svg>
							</a>
							<span data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer">
								<a href="{{ path('pokemon_delete', { 'id': pokemon.id }) }}" data-bs-toggle="modal" data-bs-target="#confirmDelete{{ pokemon.id }}" class="flex bg-secondary hover:bg-red-600 py-2 px-2 rounded-full text-white transition-colors">
									<svg focusable="false" fill="currentColor" aria-hidden="true" height="20" width="20" viewBox="0 0 24 24" data-testid="CreateRoundedIcon" aria-label="fontSize large">
										<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"></path>
									</svg>
								</a>
							</span>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto" id="confirmDelete{{ pokemon.id }}" tabindex="-1" aria-labelledby="confirmDeleteLabel{{ pokemon.id }}" aria-hidden="true">
		<div class="modal-dialog relative w-auto pointer-events-none">
			<div class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-2xl outline-none text-current">
				<div class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
					<h5 class="text-xl font-medium leading-normal text-gray-800" id="confirmDeleteLabel{{ pokemon.id }}">Supprimer</h5>
				</div>
				<div class="modal-body relative p-4 font-medium">
					Voulez-vous vraiment supprimer {{ pokemon.name|capitalize }} ?
				</div>
				<div class="modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md">
					<button type="button" class="px-6 py-2.5 bg-secondary text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-opacity-70 hover:shadow-lg focus:bg-opacity-70 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-opacity-70 active:shadow-lg transition duration-150 ease-in-out" data-bs-dismiss="modal">Annuler</button>
					<a href="{{ path('pokemon_delete', { 'id': pokemon.id }) }}" class="px-6 py-2.5 bg-secondary text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-red-600 hover:shadow-lg focus:bg-red-600 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-600 active:shadow-lg transition duration-150 ease-in-out ml-1">Supprimer</a>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto" id="infoPokemon" tabindex="-1" aria-labelledby="infoPokemon" aria-hidden="true">
		<div class="modal-dialog relative w-auto pointer-events-none">
			<div class="modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-2xl outline-none text-current">
				<div class="modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md">
					<h5 class="text-xl font-medium leading-normal text-gray-800" id="infoPokemon">Caractéristiques de {{ pokemon.name }}</h5>
				</div>
				<div class="modal-body relative p-4 leading-8 break-words">
					<p class="flex">
						<span class="w-40p">Type : </span>
						<span class="flex items-center font-medium w-60p">
							<img src="{{ asset('static/uploads/categories/' ~pokemon.category.getLogoUrl()) }}" class="relative z-10" alt="logo" width="40" height="40">
							<span class="badge bg-{{ pokemon.category.url }}">{{ pokemon.category.name }}</span>
						</span>
					</p>
					<p class="flex">
						<span class="w-40p">Taille : </span>
						<span class="font-medium w-60p">{{ pokemon.size }}</span>
					</p>
					<p class="flex">
						<span class="w-40p">Poids : </span>
						<span class="font-medium w-60p">{{ pokemon.weight }}</span>
					</p>
					<p class="flex">
						<span class="w-40p">Taux de capture : </span>
						<span class="font-medium w-60p">{{ pokemon.catchRate }}</span>
					</p>
					<p class="flex">
						<span class="w-40p">Couleur : </span>
						<span class="font-medium w-60p">{{ pokemon.color }}</span>
					</p>
					<img src="{{ asset('static/uploads/pokemons/'~ pokemon.imageUrl) }}" class="mx-auto mt-5" alt="pokemon" height="250" width="250">
				</div>
				<div class="modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md">
					<button type="button" class="px-6 py-2.5 bg-secondary text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-opacity-70 hover:shadow-lg focus:bg-opacity-70 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-opacity-70 active:shadow-lg transition duration-150 ease-in-out" data-bs-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block js %}
	<script>
		(() => {
			const pokemonCard = document.getElementById('pokemonCard')

			if (pokemonCard) {
				const bg = pokemonCard.getAttribute('data-bg')
				document.body.classList.add(bg)
				document.body.style.backgroundImage = 'linear-gradient(45deg, #f1f2f3 70%, transparent)'
			}
		})()
	</script>
{% endblock %}
